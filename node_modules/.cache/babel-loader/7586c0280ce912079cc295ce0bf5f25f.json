{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar P = _interopRequireWildcard(require(\"@react-pdf/primitives\"));\n\nvar _emoji = _interopRequireDefault(require(\"../text/emoji\"));\n\nvar _fetchImage = _interopRequireDefault(require(\"../image/fetchImage\"));\n\nvar isImage = R.propEq('type', P.Image);\n/**\n * Get all asset promises that need to be resolved\n *\n * @param {Object} root node\n * @returns {Array} asset promises\n */\n\nvar fetchAssets = function fetchAssets(fontStore, node) {\n  var _node$children;\n\n  var promises = [];\n  var listToExplore = ((_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children.slice(0)) || [];\n  var emojiSource = fontStore ? fontStore.getEmojiSource() : null;\n\n  while (listToExplore.length > 0) {\n    var _n$style;\n\n    var n = listToExplore.shift();\n\n    if (isImage(n)) {\n      promises.push((0, _fetchImage.default)(n));\n    }\n\n    if (fontStore && (_n$style = n.style) !== null && _n$style !== void 0 && _n$style.fontFamily) {\n      promises.push(fontStore.load(n.style));\n    }\n\n    if (typeof n === 'string') {\n      promises.push.apply(promises, (0, _emoji.default)(n, emojiSource));\n    }\n\n    if (typeof n.value === 'string') {\n      promises.push.apply(promises, (0, _emoji.default)(n.value, emojiSource));\n    }\n\n    if (n.children) {\n      n.children.forEach(function (childNode) {\n        listToExplore.push(childNode);\n      });\n    }\n  }\n\n  return promises;\n};\n/**\n * Fetch image, font and emoji assets in parallel.\n * Layout process will not be resumed until promise resolves.\n *\n * @param {Object} root node\n * @param {Object} fontStore font store\n * @returns {Object} root node\n */\n\n\nvar resolveAssets = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(node, fontStore) {\n    var promises;\n    return _regenerator.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            promises = fetchAssets(fontStore, node);\n            _context.next = 3;\n            return Promise.all(promises);\n\n          case 3:\n            return _context.abrupt(\"return\", node);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function resolveAssets(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _default = resolveAssets;\nexports.default = _default;","map":{"version":3,"names":["_interopRequireWildcard","require","default","_interopRequireDefault","exports","__esModule","_regenerator","_asyncToGenerator2","R","P","_emoji","_fetchImage","isImage","propEq","Image","fetchAssets","fontStore","node","_node$children","promises","listToExplore","children","slice","emojiSource","getEmojiSource","length","_n$style","n","shift","push","style","fontFamily","load","apply","value","forEach","childNode","resolveAssets","_ref","mark","_callee","wrap","_callee$","_context","prev","next","Promise","all","abrupt","stop","_x","_x2","arguments","_default"],"sources":["/home/carlobottaro/Documents/UniversitÃ /gamification/node_modules/@react-pdf/layout/lib/steps/resolveAssets.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar P = _interopRequireWildcard(require(\"@react-pdf/primitives\"));\n\nvar _emoji = _interopRequireDefault(require(\"../text/emoji\"));\n\nvar _fetchImage = _interopRequireDefault(require(\"../image/fetchImage\"));\n\nvar isImage = R.propEq('type', P.Image);\n/**\n * Get all asset promises that need to be resolved\n *\n * @param {Object} root node\n * @returns {Array} asset promises\n */\n\nvar fetchAssets = function fetchAssets(fontStore, node) {\n  var _node$children;\n\n  var promises = [];\n  var listToExplore = ((_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children.slice(0)) || [];\n  var emojiSource = fontStore ? fontStore.getEmojiSource() : null;\n\n  while (listToExplore.length > 0) {\n    var _n$style;\n\n    var n = listToExplore.shift();\n\n    if (isImage(n)) {\n      promises.push((0, _fetchImage.default)(n));\n    }\n\n    if (fontStore && (_n$style = n.style) !== null && _n$style !== void 0 && _n$style.fontFamily) {\n      promises.push(fontStore.load(n.style));\n    }\n\n    if (typeof n === 'string') {\n      promises.push.apply(promises, (0, _emoji.default)(n, emojiSource));\n    }\n\n    if (typeof n.value === 'string') {\n      promises.push.apply(promises, (0, _emoji.default)(n.value, emojiSource));\n    }\n\n    if (n.children) {\n      n.children.forEach(function (childNode) {\n        listToExplore.push(childNode);\n      });\n    }\n  }\n\n  return promises;\n};\n/**\n * Fetch image, font and emoji assets in parallel.\n * Layout process will not be resumed until promise resolves.\n *\n * @param {Object} root node\n * @param {Object} fontStore font store\n * @returns {Object} root node\n */\n\n\nvar resolveAssets = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(node, fontStore) {\n    var promises;\n    return _regenerator.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            promises = fetchAssets(fontStore, node);\n            _context.next = 3;\n            return Promise.all(promises);\n\n          case 3:\n            return _context.abrupt(\"return\", node);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function resolveAssets(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _default = resolveAssets;\nexports.default = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}