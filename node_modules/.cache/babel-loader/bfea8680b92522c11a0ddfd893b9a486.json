{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar _height = _interopRequireDefault(require(\"@react-pdf/textkit/lib/run/height\"));\n\nvar _descent = _interopRequireDefault(require(\"@react-pdf/textkit/lib/run/descent\"));\n\nvar _advanceWidth = _interopRequireDefault(require(\"@react-pdf/textkit/lib/run/advanceWidth\"));\n\nvar _ascent = _interopRequireDefault(require(\"@react-pdf/textkit/lib/attributedString/ascent\"));\n\nvar _renderGlyphs = _interopRequireDefault(require(\"./renderGlyphs\"));\n\nvar _parseColor = _interopRequireDefault(require(\"../utils/parseColor\"));\n/* eslint-disable no-param-reassign */\n\n\nvar DEST_REGEXP = /^#.+/;\n\nvar isSrcId = function isSrcId(src) {\n  return src.match(DEST_REGEXP);\n};\n\nvar renderAttachment = function renderAttachment(ctx, attachment) {\n  var _attachment$xOffset = attachment.xOffset,\n      xOffset = _attachment$xOffset === void 0 ? 0 : _attachment$xOffset,\n      _attachment$yOffset = attachment.yOffset,\n      yOffset = _attachment$yOffset === void 0 ? 0 : _attachment$yOffset,\n      width = attachment.width,\n      height = attachment.height,\n      image = attachment.image;\n  ctx.translate(-width + xOffset, -height + yOffset);\n  ctx.image(image, 0, 0, {\n    fit: [width, height],\n    align: 'center',\n    valign: 'bottom'\n  });\n};\n\nvar renderAttachments = function renderAttachments(ctx, run) {\n  ctx.save();\n  var font = run.attributes.font;\n  var space = font.glyphForCodePoint(0x20);\n  var objectReplacement = font.glyphForCodePoint(0xfffc);\n  var attachmentAdvance = 0;\n\n  for (var i = 0; i < run.glyphs.length; i += 1) {\n    var position = run.positions[i];\n    var glyph = run.glyphs[i];\n    attachmentAdvance += position.xAdvance || 0;\n\n    if (glyph.id === objectReplacement.id && run.attributes.attachment) {\n      ctx.translate(attachmentAdvance, position.yOffset || 0);\n      renderAttachment(ctx, run.attributes.attachment);\n      run.glyphs[i] = space;\n      attachmentAdvance = 0;\n    }\n  }\n\n  ctx.restore();\n};\n\nvar renderRun = function renderRun(ctx, run, options) {\n  var _run$attributes = run.attributes,\n      font = _run$attributes.font,\n      fontSize = _run$attributes.fontSize,\n      link = _run$attributes.link;\n  var color = (0, _parseColor.default)(run.attributes.color);\n  var opacity = R.defaultTo(color.opacity, run.attributes.opacity);\n  var height = (0, _height.default)(run);\n  var descent = (0, _descent.default)(run);\n  var runAdvanceWidth = (0, _advanceWidth.default)(run);\n\n  if (options.outlineRuns) {\n    ctx.rect(0, -height, runAdvanceWidth, height).stroke();\n  }\n\n  ctx.fillColor(color.value);\n  ctx.fillOpacity(opacity);\n\n  if (link) {\n    if (isSrcId(link)) {\n      ctx.goTo(0, -height - descent, runAdvanceWidth, height, link.slice(1));\n    } else {\n      ctx.link(0, -height - descent, runAdvanceWidth, height, link);\n    }\n  }\n\n  renderAttachments(ctx, run);\n\n  if (font.sbix || font.COLR && font.CPAL) {\n    ctx.save();\n    ctx.translate(0, -run.ascent);\n\n    for (var i = 0; i < run.glyphs.length; i += 1) {\n      var position = run.positions[i];\n      var glyph = run.glyphs[i];\n      ctx.save();\n      ctx.translate(position.xOffset, position.yOffset);\n      glyph.render(ctx, fontSize);\n      ctx.restore();\n      ctx.translate(position.xAdvance, position.yAdvance);\n    }\n\n    ctx.restore();\n  } else {\n    ctx.font(typeof font.name === 'string' ? font.name : font, fontSize);\n\n    try {\n      (0, _renderGlyphs.default)(ctx, run.glyphs, run.positions, 0, 0);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  ctx.translate(runAdvanceWidth, 0);\n};\n\nvar renderBackground = function renderBackground(ctx, rect, backgroundColor) {\n  var color = (0, _parseColor.default)(backgroundColor);\n  ctx.save();\n  ctx.fillOpacity(color.opacity);\n  ctx.rect(rect.x, rect.y, rect.width, rect.height);\n  ctx.fill(color.value);\n  ctx.restore();\n};\n\nvar renderDecorationLine = function renderDecorationLine(ctx, line) {\n  ctx.save();\n  ctx.lineWidth(line.rect.height);\n  ctx.strokeOpacity(line.opacity);\n\n  if (/dashed/.test(line.style)) {\n    ctx.dash(3 * line.rect.height);\n  } else if (/dotted/.test(line.style)) {\n    ctx.dash(line.rect.height);\n  }\n\n  if (/wavy/.test(line.style)) {\n    var dist = Math.max(2, line.rect.height);\n    var step = 1.1 * dist;\n    var stepCount = Math.floor(line.rect.width / (2 * step)); // Adjust step to fill entire width\n\n    var remainingWidth = line.rect.width - stepCount * 2 * step;\n    var adjustment = remainingWidth / stepCount / 2;\n    step += adjustment;\n    var cp1y = line.rect.y + dist;\n    var cp2y = line.rect.y - dist;\n    var x = line.rect.x;\n    ctx.moveTo(line.rect.x, line.rect.y);\n\n    for (var i = 0; i < stepCount; i += 1) {\n      ctx.bezierCurveTo(x + step, cp1y, x + step, cp2y, x + 2 * step, line.rect.y);\n      x += 2 * step;\n    }\n  } else {\n    ctx.moveTo(line.rect.x, line.rect.y);\n    ctx.lineTo(line.rect.x + line.rect.width, line.rect.y);\n\n    if (/double/.test(line.style)) {\n      ctx.moveTo(line.rect.x, line.rect.y + line.rect.height * 2);\n      ctx.lineTo(line.rect.x + line.rect.width, line.rect.y + line.rect.height * 2);\n    }\n  }\n\n  ctx.stroke(line.color);\n  ctx.restore();\n};\n\nvar renderLine = function renderLine(ctx, line, options) {\n  var lineAscent = (0, _ascent.default)(line);\n\n  if (options.outlineLines) {\n    ctx.rect(line.box.x, line.box.y, line.box.width, line.box.height).stroke();\n  }\n\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y + lineAscent);\n\n  for (var i = 0; i < line.runs.length; i += 1) {\n    var run = line.runs[i];\n    var isLastRun = i === line.runs.length - 1;\n\n    if (run.attributes.backgroundColor) {\n      var overflowRight = isLastRun ? line.overflowRight : 0;\n      var backgroundRect = {\n        x: 0,\n        y: -lineAscent,\n        height: line.box.height,\n        width: (0, _advanceWidth.default)(run) - overflowRight\n      };\n      renderBackground(ctx, backgroundRect, run.attributes.backgroundColor);\n    }\n\n    renderRun(ctx, run, options);\n  }\n\n  ctx.restore();\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y);\n\n  for (var _i = 0; _i < line.decorationLines.length; _i += 1) {\n    var decorationLine = line.decorationLines[_i];\n    renderDecorationLine(ctx, decorationLine);\n  }\n\n  ctx.restore();\n};\n\nvar renderBlock = function renderBlock(ctx, block, options) {\n  block.forEach(function (line) {\n    renderLine(ctx, line, options);\n  });\n};\n\nvar renderText = function renderText(ctx, node) {\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left;\n  var blocks = [node.lines];\n  var paddingTop = R.pathOr(0, ['box', 'paddingTop'], node);\n  var paddingLeft = R.pathOr(0, ['box', 'paddingLeft'], node);\n  var initialY = node.lines[0] ? node.lines[0].box.y : 0;\n  var offsetX = node.alignOffset || 0;\n  ctx.save();\n  ctx.translate(left + paddingLeft - offsetX, top + paddingTop - initialY);\n  blocks.forEach(function (block) {\n    renderBlock(ctx, block, {});\n  });\n  ctx.restore();\n  return node;\n};\n\nvar _default = R.curryN(2, renderText);\n\nexports.default = _default;","map":{"version":3,"names":["_interopRequireDefault","require","default","_interopRequireWildcard","exports","__esModule","R","_height","_descent","_advanceWidth","_ascent","_renderGlyphs","_parseColor","DEST_REGEXP","isSrcId","src","match","renderAttachment","ctx","attachment","_attachment$xOffset","xOffset","_attachment$yOffset","yOffset","width","height","image","translate","fit","align","valign","renderAttachments","run","save","font","attributes","space","glyphForCodePoint","objectReplacement","attachmentAdvance","i","glyphs","length","position","positions","glyph","xAdvance","id","restore","renderRun","options","_run$attributes","fontSize","link","color","opacity","defaultTo","descent","runAdvanceWidth","outlineRuns","rect","stroke","fillColor","value","fillOpacity","goTo","slice","sbix","COLR","CPAL","ascent","render","yAdvance","name","error","console","log","renderBackground","backgroundColor","x","y","fill","renderDecorationLine","line","lineWidth","strokeOpacity","test","style","dash","dist","Math","max","step","stepCount","floor","remainingWidth","adjustment","cp1y","cp2y","moveTo","bezierCurveTo","lineTo","renderLine","lineAscent","outlineLines","box","runs","isLastRun","overflowRight","backgroundRect","_i","decorationLines","decorationLine","renderBlock","block","forEach","renderText","node","_node$box","top","left","blocks","lines","paddingTop","pathOr","paddingLeft","initialY","offsetX","alignOffset","_default","curryN"],"sources":["/home/carlobottaro/Documents/UniversitÃ /gamification/node_modules/@react-pdf/render/lib/primitives/renderText.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar _height = _interopRequireDefault(require(\"@react-pdf/textkit/lib/run/height\"));\n\nvar _descent = _interopRequireDefault(require(\"@react-pdf/textkit/lib/run/descent\"));\n\nvar _advanceWidth = _interopRequireDefault(require(\"@react-pdf/textkit/lib/run/advanceWidth\"));\n\nvar _ascent = _interopRequireDefault(require(\"@react-pdf/textkit/lib/attributedString/ascent\"));\n\nvar _renderGlyphs = _interopRequireDefault(require(\"./renderGlyphs\"));\n\nvar _parseColor = _interopRequireDefault(require(\"../utils/parseColor\"));\n\n/* eslint-disable no-param-reassign */\nvar DEST_REGEXP = /^#.+/;\n\nvar isSrcId = function isSrcId(src) {\n  return src.match(DEST_REGEXP);\n};\n\nvar renderAttachment = function renderAttachment(ctx, attachment) {\n  var _attachment$xOffset = attachment.xOffset,\n      xOffset = _attachment$xOffset === void 0 ? 0 : _attachment$xOffset,\n      _attachment$yOffset = attachment.yOffset,\n      yOffset = _attachment$yOffset === void 0 ? 0 : _attachment$yOffset,\n      width = attachment.width,\n      height = attachment.height,\n      image = attachment.image;\n  ctx.translate(-width + xOffset, -height + yOffset);\n  ctx.image(image, 0, 0, {\n    fit: [width, height],\n    align: 'center',\n    valign: 'bottom'\n  });\n};\n\nvar renderAttachments = function renderAttachments(ctx, run) {\n  ctx.save();\n  var font = run.attributes.font;\n  var space = font.glyphForCodePoint(0x20);\n  var objectReplacement = font.glyphForCodePoint(0xfffc);\n  var attachmentAdvance = 0;\n\n  for (var i = 0; i < run.glyphs.length; i += 1) {\n    var position = run.positions[i];\n    var glyph = run.glyphs[i];\n    attachmentAdvance += position.xAdvance || 0;\n\n    if (glyph.id === objectReplacement.id && run.attributes.attachment) {\n      ctx.translate(attachmentAdvance, position.yOffset || 0);\n      renderAttachment(ctx, run.attributes.attachment);\n      run.glyphs[i] = space;\n      attachmentAdvance = 0;\n    }\n  }\n\n  ctx.restore();\n};\n\nvar renderRun = function renderRun(ctx, run, options) {\n  var _run$attributes = run.attributes,\n      font = _run$attributes.font,\n      fontSize = _run$attributes.fontSize,\n      link = _run$attributes.link;\n  var color = (0, _parseColor.default)(run.attributes.color);\n  var opacity = R.defaultTo(color.opacity, run.attributes.opacity);\n  var height = (0, _height.default)(run);\n  var descent = (0, _descent.default)(run);\n  var runAdvanceWidth = (0, _advanceWidth.default)(run);\n\n  if (options.outlineRuns) {\n    ctx.rect(0, -height, runAdvanceWidth, height).stroke();\n  }\n\n  ctx.fillColor(color.value);\n  ctx.fillOpacity(opacity);\n\n  if (link) {\n    if (isSrcId(link)) {\n      ctx.goTo(0, -height - descent, runAdvanceWidth, height, link.slice(1));\n    } else {\n      ctx.link(0, -height - descent, runAdvanceWidth, height, link);\n    }\n  }\n\n  renderAttachments(ctx, run);\n\n  if (font.sbix || font.COLR && font.CPAL) {\n    ctx.save();\n    ctx.translate(0, -run.ascent);\n\n    for (var i = 0; i < run.glyphs.length; i += 1) {\n      var position = run.positions[i];\n      var glyph = run.glyphs[i];\n      ctx.save();\n      ctx.translate(position.xOffset, position.yOffset);\n      glyph.render(ctx, fontSize);\n      ctx.restore();\n      ctx.translate(position.xAdvance, position.yAdvance);\n    }\n\n    ctx.restore();\n  } else {\n    ctx.font(typeof font.name === 'string' ? font.name : font, fontSize);\n\n    try {\n      (0, _renderGlyphs.default)(ctx, run.glyphs, run.positions, 0, 0);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  ctx.translate(runAdvanceWidth, 0);\n};\n\nvar renderBackground = function renderBackground(ctx, rect, backgroundColor) {\n  var color = (0, _parseColor.default)(backgroundColor);\n  ctx.save();\n  ctx.fillOpacity(color.opacity);\n  ctx.rect(rect.x, rect.y, rect.width, rect.height);\n  ctx.fill(color.value);\n  ctx.restore();\n};\n\nvar renderDecorationLine = function renderDecorationLine(ctx, line) {\n  ctx.save();\n  ctx.lineWidth(line.rect.height);\n  ctx.strokeOpacity(line.opacity);\n\n  if (/dashed/.test(line.style)) {\n    ctx.dash(3 * line.rect.height);\n  } else if (/dotted/.test(line.style)) {\n    ctx.dash(line.rect.height);\n  }\n\n  if (/wavy/.test(line.style)) {\n    var dist = Math.max(2, line.rect.height);\n    var step = 1.1 * dist;\n    var stepCount = Math.floor(line.rect.width / (2 * step)); // Adjust step to fill entire width\n\n    var remainingWidth = line.rect.width - stepCount * 2 * step;\n    var adjustment = remainingWidth / stepCount / 2;\n    step += adjustment;\n    var cp1y = line.rect.y + dist;\n    var cp2y = line.rect.y - dist;\n    var x = line.rect.x;\n    ctx.moveTo(line.rect.x, line.rect.y);\n\n    for (var i = 0; i < stepCount; i += 1) {\n      ctx.bezierCurveTo(x + step, cp1y, x + step, cp2y, x + 2 * step, line.rect.y);\n      x += 2 * step;\n    }\n  } else {\n    ctx.moveTo(line.rect.x, line.rect.y);\n    ctx.lineTo(line.rect.x + line.rect.width, line.rect.y);\n\n    if (/double/.test(line.style)) {\n      ctx.moveTo(line.rect.x, line.rect.y + line.rect.height * 2);\n      ctx.lineTo(line.rect.x + line.rect.width, line.rect.y + line.rect.height * 2);\n    }\n  }\n\n  ctx.stroke(line.color);\n  ctx.restore();\n};\n\nvar renderLine = function renderLine(ctx, line, options) {\n  var lineAscent = (0, _ascent.default)(line);\n\n  if (options.outlineLines) {\n    ctx.rect(line.box.x, line.box.y, line.box.width, line.box.height).stroke();\n  }\n\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y + lineAscent);\n\n  for (var i = 0; i < line.runs.length; i += 1) {\n    var run = line.runs[i];\n    var isLastRun = i === line.runs.length - 1;\n\n    if (run.attributes.backgroundColor) {\n      var overflowRight = isLastRun ? line.overflowRight : 0;\n      var backgroundRect = {\n        x: 0,\n        y: -lineAscent,\n        height: line.box.height,\n        width: (0, _advanceWidth.default)(run) - overflowRight\n      };\n      renderBackground(ctx, backgroundRect, run.attributes.backgroundColor);\n    }\n\n    renderRun(ctx, run, options);\n  }\n\n  ctx.restore();\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y);\n\n  for (var _i = 0; _i < line.decorationLines.length; _i += 1) {\n    var decorationLine = line.decorationLines[_i];\n    renderDecorationLine(ctx, decorationLine);\n  }\n\n  ctx.restore();\n};\n\nvar renderBlock = function renderBlock(ctx, block, options) {\n  block.forEach(function (line) {\n    renderLine(ctx, line, options);\n  });\n};\n\nvar renderText = function renderText(ctx, node) {\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left;\n  var blocks = [node.lines];\n  var paddingTop = R.pathOr(0, ['box', 'paddingTop'], node);\n  var paddingLeft = R.pathOr(0, ['box', 'paddingLeft'], node);\n  var initialY = node.lines[0] ? node.lines[0].box.y : 0;\n  var offsetX = node.alignOffset || 0;\n  ctx.save();\n  ctx.translate(left + paddingLeft - offsetX, top + paddingTop - initialY);\n  blocks.forEach(function (block) {\n    renderBlock(ctx, block, {});\n  });\n  ctx.restore();\n  return node;\n};\n\nvar _default = R.curryN(2, renderText);\n\nexports.default = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}