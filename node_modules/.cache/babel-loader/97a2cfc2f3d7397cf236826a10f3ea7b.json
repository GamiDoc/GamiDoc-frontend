{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar _standardFont = _interopRequireDefault(require(\"./standardFont\"));\n\nvar fontCache = {};\nvar IGNORED_CODE_POINTS = [173];\nvar getFontSize = R.pathOr(12, ['attributes', 'fontSize']);\n\nvar getOrCreateFont = function getOrCreateFont(name) {\n  if (fontCache[name]) return fontCache[name];\n  var font = new _standardFont.default(name);\n  fontCache[name] = font;\n  return font;\n};\n\nvar getFallbackFont = function getFallbackFont() {\n  return getOrCreateFont('Helvetica');\n};\n\nvar shouldFallbackToFont = function shouldFallbackToFont(codePoint, font) {\n  return !font || !IGNORED_CODE_POINTS.includes(codePoint) && !font.hasGlyphForCodePoint(codePoint) && getFallbackFont().hasGlyphForCodePoint(codePoint);\n};\n\nvar fontSubstitution = function fontSubstitution() {\n  return function (_ref) {\n    var string = _ref.string,\n        runs = _ref.runs;\n    var lastFont = null;\n    var lastFontSize = null;\n    var lastIndex = 0;\n    var index = 0;\n    var res = [];\n\n    for (var i = 0; i < runs.length; i += 1) {\n      var run = runs[i];\n      var defaultFont = typeof run.attributes.font === 'string' ? getOrCreateFont(run.attributes.font) : run.attributes.font;\n\n      if (string.length === 0) {\n        res.push({\n          start: 0,\n          end: 0,\n          attributes: {\n            font: defaultFont\n          }\n        });\n        break;\n      }\n\n      var chars = string.slice(run.start, run.end);\n\n      for (var j = 0; j < chars.length; j += 1) {\n        var char = chars[j];\n        var codePoint = char.codePointAt();\n        var shouldFallback = shouldFallbackToFont(codePoint, defaultFont); // If the default font does not have a glyph and the fallback font does, we use it\n\n        var font = shouldFallback ? getFallbackFont() : defaultFont;\n        var fontSize = getFontSize(run); // If anything that would impact res has changed, update it\n\n        if (font !== lastFont || fontSize !== lastFontSize || font.unitsPerEm !== lastFont.unitsPerEm) {\n          if (lastFont) {\n            res.push({\n              start: lastIndex,\n              end: index,\n              attributes: {\n                font: lastFont,\n                scale: lastFontSize / lastFont.unitsPerEm\n              }\n            });\n          }\n\n          lastFont = font;\n          lastFontSize = fontSize;\n          lastIndex = index;\n        }\n\n        index += char.length;\n      }\n    }\n\n    if (lastIndex < string.length) {\n      var _fontSize = getFontSize(R.last(runs));\n\n      res.push({\n        start: lastIndex,\n        end: string.length,\n        attributes: {\n          font: lastFont,\n          scale: _fontSize / lastFont.unitsPerEm\n        }\n      });\n    }\n\n    return {\n      string: string,\n      runs: res\n    };\n  };\n};\n\nvar _default = fontSubstitution;\nexports.default = _default;","map":{"version":3,"names":["_interopRequireDefault","require","default","_interopRequireWildcard","exports","__esModule","R","_standardFont","fontCache","IGNORED_CODE_POINTS","getFontSize","pathOr","getOrCreateFont","name","font","getFallbackFont","shouldFallbackToFont","codePoint","includes","hasGlyphForCodePoint","fontSubstitution","_ref","string","runs","lastFont","lastFontSize","lastIndex","index","res","i","length","run","defaultFont","attributes","push","start","end","chars","slice","j","char","codePointAt","shouldFallback","fontSize","unitsPerEm","scale","_fontSize","last","_default"],"sources":["/home/carlobottaro/Documents/UniversitÃ /gamification/node_modules/@react-pdf/layout/lib/text/fontSubstitution.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar _standardFont = _interopRequireDefault(require(\"./standardFont\"));\n\nvar fontCache = {};\nvar IGNORED_CODE_POINTS = [173];\nvar getFontSize = R.pathOr(12, ['attributes', 'fontSize']);\n\nvar getOrCreateFont = function getOrCreateFont(name) {\n  if (fontCache[name]) return fontCache[name];\n  var font = new _standardFont.default(name);\n  fontCache[name] = font;\n  return font;\n};\n\nvar getFallbackFont = function getFallbackFont() {\n  return getOrCreateFont('Helvetica');\n};\n\nvar shouldFallbackToFont = function shouldFallbackToFont(codePoint, font) {\n  return !font || !IGNORED_CODE_POINTS.includes(codePoint) && !font.hasGlyphForCodePoint(codePoint) && getFallbackFont().hasGlyphForCodePoint(codePoint);\n};\n\nvar fontSubstitution = function fontSubstitution() {\n  return function (_ref) {\n    var string = _ref.string,\n        runs = _ref.runs;\n    var lastFont = null;\n    var lastFontSize = null;\n    var lastIndex = 0;\n    var index = 0;\n    var res = [];\n\n    for (var i = 0; i < runs.length; i += 1) {\n      var run = runs[i];\n      var defaultFont = typeof run.attributes.font === 'string' ? getOrCreateFont(run.attributes.font) : run.attributes.font;\n\n      if (string.length === 0) {\n        res.push({\n          start: 0,\n          end: 0,\n          attributes: {\n            font: defaultFont\n          }\n        });\n        break;\n      }\n\n      var chars = string.slice(run.start, run.end);\n\n      for (var j = 0; j < chars.length; j += 1) {\n        var char = chars[j];\n        var codePoint = char.codePointAt();\n        var shouldFallback = shouldFallbackToFont(codePoint, defaultFont); // If the default font does not have a glyph and the fallback font does, we use it\n\n        var font = shouldFallback ? getFallbackFont() : defaultFont;\n        var fontSize = getFontSize(run); // If anything that would impact res has changed, update it\n\n        if (font !== lastFont || fontSize !== lastFontSize || font.unitsPerEm !== lastFont.unitsPerEm) {\n          if (lastFont) {\n            res.push({\n              start: lastIndex,\n              end: index,\n              attributes: {\n                font: lastFont,\n                scale: lastFontSize / lastFont.unitsPerEm\n              }\n            });\n          }\n\n          lastFont = font;\n          lastFontSize = fontSize;\n          lastIndex = index;\n        }\n\n        index += char.length;\n      }\n    }\n\n    if (lastIndex < string.length) {\n      var _fontSize = getFontSize(R.last(runs));\n\n      res.push({\n        start: lastIndex,\n        end: string.length,\n        attributes: {\n          font: lastFont,\n          scale: _fontSize / lastFont.unitsPerEm\n        }\n      });\n    }\n\n    return {\n      string: string,\n      runs: res\n    };\n  };\n};\n\nvar _default = fontSubstitution;\nexports.default = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}